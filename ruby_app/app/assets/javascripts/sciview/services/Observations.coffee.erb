module = angular.module('sv.ui.services')

module.factory("Observation", ["DS",
  (DS) ->
    DS.defineResource(
      name: "viewState"
      endpoint: 'view_states'
      baseUrl: '/api/v1'
      relations:
        hasMany:
          observation:
            localField: 'observations'
            foreignKey: 'viewStateId'
    )

    DS.defineResource(
      name: "observation"
      endpoint: 'observations'
      baseUrl: '/api/v1'
      relations:
        belongsTo:
          viewState:
            localKey: "viewStateId"
            localField: 'viewState'
            parent: true
    )
])

#module.factory("Observation", ['$resource',
  #($resource) -> return $resource(
    #'api/v1/view_states/:dataSetId/observations/:id.json'
    #{ dataSetId: '@dataSetId', id: '@id' }, {
      #index: { method: 'GET', isArray: true }
      #update: { method: 'PUT' }
      #create: { method: 'POST' }
      #delete: { method: 'DELETE' }
    #}
  #)
#])

# module.service "Observations", ->
#   Observations = {}
#   Observations.getObservations = ->
#     [
#       data_set: "launch_39.2"
#       data_point: "C"
#       img: "<%= asset_path('prof-1.png') %>"
#       author: "Blake Benthall"
#       created: "1288323623006"
#       observation: "This doesn't look good, it could be X or Y, but not Z."
#     ,
#       data_set: "TEST_3A"
#       data_point: "F"
#       img: "<%= asset_path('prof-2.png') %>"
#       author: "Paul Mestemaker"
#       created: "1288323623006"
#       observation: "I think this problem will continue to grow if we don't address immediately. I think we could do Z if we had A and B, but that's up to Stan."
#     ,
#       data_set: "TEST_3A"
#       data_point: "F"
#       img: "<%= asset_path('prof-2.png') %>"
#       author: "Paul Mestemaker"
#       created: "1288323623006"
#       observation: "I think this problem will continue to grow if we don't address immediately. I think we could do Z if we had A and B, but that's up to Stan."
#     ,
#       data_set: "TEST_3A"
#       data_point: "F"
#       img: "<%= asset_path('prof-2.png') %>"
#       author: "Paul Mestemaker"
#       created: "1288323623006"
#       observation: "I think this problem will continue to grow if we don't address immediately. I think we could do Z if we had A and B, but that's up to Stan."
#     ,
#       data_set: "launch_39.2"
#       data_point: "C"
#       img: "<%= asset_path('prof-1.png') %>"
#       author: "Blake Benthall"
#       created: "1288323623006"
#       observation: "This doesn't look good, it could be X or Y, but not Z."
#     ]
# 
#   Observations
